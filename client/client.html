<head>
  <title>Chit Chatter</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body>
  <div class="container">
    {{> loginButtons align="right"}}
    <h1>Chit Chatter</h1>
    {{> welcome }}
    <div id="messages-container">
      {{> loadEarlierMessages }}
      {{> messages }}
    </div>
  </div>
  {{#if currentUser}}
    {{> input }}
  {{/if}}
</body>

<template name="welcome">
  {{#unless currentUser}}
    <div id="welcome-tagline">
      Say ALL THINGS!
    </div>
  {{/unless}}
</template>

<template name="loadEarlierMessages">
  {{#if currentUser}}
    {{#if messages}}
      <div class="load-more">
        <button id="loadMoreButton">Load Earlier Messages</button>
      </div>
    {{/if}}
  {{/if}}
</template>

<template name="messages">
  {{#each messages}}
    {{#if currentUserSubmitted}}
      {{#if currentUser}}
        <div class="current-user-msg">
          <div>{{message}}</div><img class="current-user-picture" src="{{currentUser.profile.picture}}">
        </div>
      {{/if}}
    {{else}}
      <div class="other-msg-container">
        <small class="other-user-namestamp">{{name}}</small><br />
        <div class="other-user-msg">
          <img class="other-user-picture" src="{{otherUserPicture.profile.picture}}"><div>{{message}}</div>
        </div>
      </div>
    {{/if}}
  {{/each}}
</template>

<template name="input">
  <div class="center-add-msg">
    <div id="addMessage">
      <textarea type="text" id="message" placeholder="Enter new message"></textarea>
    </div>
  </div>
</template>
